{"id":4405,"date":"2021-07-23T13:52:16","date_gmt":"2021-07-23T13:52:16","guid":{"rendered":"https:\/\/davidegerosa.com\/?page_id=4405"},"modified":"2022-08-31T16:12:31","modified_gmt":"2022-08-31T15:12:31","slug":"local-browser-on-ssh-tunnel","status":"publish","type":"page","link":"https:\/\/davidegerosa.com\/local-browser-on-ssh-tunnel\/","title":{"rendered":"Local browser from a remote server"},"content":{"rendered":"\n<p>This is a short guide to browse the internet using a local browser via a remote server. This is useful to login into a University machine with your RSA key and then browse the internet as if you are on campus.<\/p>\n\n\n\n<h2>Option 1 (best): a dedicated Chrome session<\/h2>\n\n\n\n<p>The best option I found was to open a dedicated Chrome session through an SSH tunnel. First, open an ssh connection to your server (user@host) specifying the port number (in this case 1337 but you can pick whatever you want):<\/p>\n\n\n\n<p><code>ssh -D 1337 -f -C -q -N user@host<\/code><\/p>\n\n\n\n<p>Then open Google Chrome using that SSH tunnel as a proxy. You need to specify a cache directory, otherwise, it interferes with your main Chrome session:<\/p>\n\n\n\n<p><code>ssh -D $portid -f -C -q -N $host<br>\/Applications\/Google\\ Chrome.app\/Contents\/MacOS\/Google\\ Chrome --proxy-server=socks5:\/\/localhost:1337 --user-data-dir=~\/chromesession<\/code><\/p>\n\n\n\n<p>A new Chrome window will open: in that window (but not elsewhere) it&#8217;s like you&#8217;re browsing from the remote location. Wow!<\/p>\n\n\n\n<p>You can put these two operations in a convenient function for your <code>bashrc<\/code><\/p>\n\n\n\n<p><code>function portssh {<br>    host=${1}<br>    portid=${2:-1337}<br>    echo Port $portid $host<br>    ssh -D $portid -f -C -q -N $host<br>    \/Applications\/Google\\ Chrome.app\/Contents\/MacOS\/Google\\ Chrome --proxy-server=socks5:\/\/localhost:${portid} --user-data-dir=~\/chromesession<br>}<\/code><\/p>\n\n\n\n<p>This can be called with<\/p>\n\n\n\n<p><code>portssh &lt;server><\/code><\/p>\n\n\n\n<p>where <code>&lt;server><\/code> is an entry of your ssh config file. <\/p>\n\n\n\n<h2>Option 2 (manual): a global proxy<\/h2>\n\n\n\n<p>This is a more manual solution where you redirect the entire web traffic through the remote server. First open the ssh tunnel<\/p>\n\n\n\n<p><code>ssh -D 1337 -f -C -q -N user@host<\/code><\/p>\n\n\n\n<p>On mac then do the following:<\/p>\n\n\n\n<ul><li>Go to: &#8220;Settings&#8221;, &#8220;Network&#8221;, &#8220;Wi-Fi&#8221;, &#8220;Advanced&#8221;, &#8220;Proxies&#8221;. <\/li><li>Click on &#8220;SOCKS Proxies&#8221; and write &#8220;localhost&#8221; and &#8220;1337&#8221; in the two white boxes separated by a colon. <\/li><li>Click &#8220;Ok&#8221; and &#8220;Apply&#8221; <\/li><\/ul>\n\n\n\n<p>Here you go, your browser will now believe you&#8217;re elsewhere. Remember you switch the proxy option off when you want to go back to your usual internet setup. <\/p>\n","protected":false},"excerpt":{"rendered":"<p>This is a short guide to browse the internet using a local browser via a remote server. This is useful to login into a University machine with your RSA key and then browse the internet as if you are on &hellip; <a href=\"https:\/\/davidegerosa.com\/local-browser-on-ssh-tunnel\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":1,"featured_media":4406,"parent":0,"menu_order":0,"comment_status":"closed","ping_status":"closed","template":"","meta":{"_coblocks_attr":"","_coblocks_dimensions":"","_coblocks_responsive_height":"","_coblocks_accordion_ie_support":"","_mi_skip_tracking":false,"_monsterinsights_sitenote_active":false,"_monsterinsights_sitenote_note":"","_monsterinsights_sitenote_category":0},"_links":{"self":[{"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/pages\/4405"}],"collection":[{"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/pages"}],"about":[{"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/types\/page"}],"author":[{"embeddable":true,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/comments?post=4405"}],"version-history":[{"count":2,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/pages\/4405\/revisions"}],"predecessor-version":[{"id":5025,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/pages\/4405\/revisions\/5025"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/media\/4406"}],"wp:attachment":[{"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/media?parent=4405"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}