{"id":1563,"date":"2017-09-02T08:22:43","date_gmt":"2017-09-02T15:22:43","guid":{"rendered":"http:\/\/davidegerosa.com\/?page_id=1563"},"modified":"2017-09-02T08:22:43","modified_gmt":"2017-09-02T15:22:43","slug":"installlal","status":"publish","type":"page","link":"https:\/\/davidegerosa.com\/installlal\/","title":{"rendered":"My notes to install the LIGO Algorithm Libray (lal)"},"content":{"rendered":"<p>If you do research in gravity, you probably know what\u00a0<a href=\"http:\/\/software.ligo.org\/docs\/lalsuite\/lalsuite\/\" target=\"_blank\" rel=\"noopener noreferrer\">lal<\/a>\u00a0is (if not, maybe you should leave this page&#8230;). It&#8217;s a monumental set of codes and tools developed by the LIGO and Virgo Collaboration to run gravitational-wave search pipelines, source modeling studies, etc, etc.<\/p>\n<p>It&#8217;s a great open-source tool if you know how to use it, but installation can be messy. I recently went through the process and would like to share my steps (this is mostly a set of notes for myself if I have to do it again, but thought maybe can be useful to others). The guide here mostly follows <a href=\"http:\/\/pycbc.org\/pycbc\/latest\/html\/install.html\" target=\"_blank\" rel=\"noopener noreferrer\">this one<\/a>.<\/p>\n<p>I was interested in doing basic stuff, like plotting waveforms, computing signal-to-noise ratios, etc. I think the most accessible way is the python <a href=\"https:\/\/ligo-cbc.github.io\/pycbc\/latest\/html\/index.html\" target=\"_blank\" rel=\"noopener noreferrer\">pyCBC module<\/a>. It provides a reasonable high-level interface to many of the lal functions, which is what I like.<\/p>\n<p><strong>Important<\/strong>: if you use pyCBC for your research, make sure you cite them as they want to be cited! See <a href=\"https:\/\/ligo-cbc.github.io\/pycbc\/latest\/html\/credit.html\" target=\"_blank\" rel=\"noopener noreferrer\">here<\/a>.<\/p>\n<p><strong>Important<\/strong>: I&#8217;m not a lal or pyCBC developer, this is just my personal set of notes.<\/p>\n<h3><\/h3>\n<h3>Before you start&#8230;<\/h3>\n<p>On Mac, first use <a href=\"https:\/\/brew.sh\/\" target=\"_blank\" rel=\"noopener noreferrer\">homebrew<\/a> to install a couple of things you&#8217;re going to need (maybe you have them already, I didn&#8217;t):<\/p>\n<pre>brew install gsl\nbrew install swig<\/pre>\n<h3><\/h3>\n<h3>Isolate the mess<\/h3>\n<p>We will install lal\u00a0and pyCBC in a dedicated virtual environment. Given how easy it is to mess things up, this <strong>definitely<\/strong> the way to go. If you don&#8217;t have it, I wrote about installing virtual environment <a href=\"http:\/\/davidegerosa.com\/installpython\/\">here<\/a>. \u00a0First, go somewhere in your system (this will be the parent directory of your lal installation) and create a python virtual environment in there<\/p>\n<pre>cd somewhere\n<span class=\"s1\">virtualenv lal<\/span><\/pre>\n<p>I personally find useful to have a short command to get in and out the environment. This will add a <code>lal<\/code>\u00a0alias to your <code>bashrc<\/code>:<\/p>\n<pre>echo \"\" &gt;&gt;${HOME}\/.bashrc\necho \"alias lal='source ${HOME}\/lal\/bin\/activate' \" &gt;&gt; ${HOME}\/.bashrc\nsource\u00a0${HOME}\/.bashrc<\/pre>\n<p>Now you can type <code>lal<\/code> and <code>deactivate<\/code> to go in an out the virtual environment.<\/p>\n<p>Go in, and install some basic python packages<\/p>\n<pre>lal\npip install --upgrade pip\npip install --upgrade setuptools\n<span class=\"s1\">pip install numpy scipy matplotlib h5py astropy <\/span>dqsegdb<\/pre>\n<p>Do not move the lal directory of your virtual environment, or everything will break because paths are hardcoded\u00a0everywhere. If you want to change the installation location, delete everything and start again. If you get errors somewhere along the way and need to start again, just remove the lal directory and everything you&#8217;ve done will go with it.<\/p>\n<h3><\/h3>\n<h3>Install lalsuite<\/h3>\n<p>Now we are ready to install lalsuite. Create a source directory and clone the repository<\/p>\n<pre>mkdir -p <span class=\"si\">${<\/span><span class=\"nv\">VIRTUAL_ENV<\/span><span class=\"si\">}<\/span>\/src\n<span class=\"nb\">cd<\/span> <span class=\"si\">${<\/span><span class=\"nv\">VIRTUAL_ENV<\/span><span class=\"si\">}<\/span>\/src\ngit clone https:\/\/git.ligo.org\/lscsoft\/lalsuite.git # Takes a while...\n<span class=\"nb\">cd<\/span> <span class=\"si\">${<\/span><span class=\"nv\">VIRTUAL_ENV<\/span><span class=\"si\">}<\/span>\/src\/lalsuite<\/pre>\n<p>LIGO migrated their repository in Dec 2017. Earlier versions are at: <code>https:\/\/github.com\/lscsoft\/lalsuite.git<\/code>.<\/p>\n<p>Now, proceed with a simplified installation. Right now I am only interested in plotting waveforms, compute SNR, matches etc, so I removed things that for me are unnecessary:<\/p>\n<pre>.\/00boot\n.\/configure --prefix=${VIRTUAL_ENV}\/opt\/lalsuite --enable-swig-python --disable-lalstochastic --disable-lalxml --disable-lalinference --disable-laldetchar --disable-lalapps --disable-lalframe --disable-lalmetaio --disable-lalpulsar\nmake\nmake install<\/pre>\n<p>By the way, after running the configure command, you should have received a message which says something like<\/p>\n<pre class=\"p1\"><span class=\"s1\">&gt;&gt;&gt;LALSimulation has now been successfully configured:<\/span>\n<span class=\"s1\">&gt;&gt;&gt;* Python support is ENABLED\n&gt;&gt;&gt; (many other things) DISABLED<\/span><\/pre>\n<p>If you don&#8217;t have this, then I guess something went wrong. \u00a0This piece of code requires the execution of a script to make variables accessible, etc. It&#8217;s useful if you run it together with the virtual environment activation script:<\/p>\n<pre><span class=\"nb\">echo<\/span> <span class=\"s1\">'source ${VIRTUAL_ENV}\/opt\/lalsuite\/etc\/lalsuite-user-env.sh'<\/span> &gt;&gt; <span class=\"si\">${<\/span><span class=\"nv\">VIRTUAL_ENV<\/span><span class=\"si\">}<\/span>\/bin\/activate\ndeactivate\nlal<\/pre>\n<p>As a test of your successful installation, try<\/p>\n<pre><span class=\"nb\">echo<\/span> <span class=\"nv\">$LAL_PREFIX<\/span><\/pre>\n<p>and you should get the lalsuite installation directory.<\/p>\n<h3><\/h3>\n<h3>Install pyCBC<\/h3>\n<p>After\u00a0that, installing pyCBC is as easy as:<\/p>\n<pre>pip install PyCBC\n<\/pre>\n<p>You can try some of the examples presented <a href=\"http:\/\/ligo-cbc.github.io\/pycbc\/latest\/html\/waveform.html\" target=\"_blank\" rel=\"noopener noreferrer\">here<\/a>.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>If you do research in gravity, you probably know what\u00a0lal\u00a0is (if not, maybe you should leave this page&#8230;). It&#8217;s a monumental set of codes and tools developed by the LIGO and Virgo Collaboration to run gravitational-wave search pipelines, source modeling &hellip; <a href=\"https:\/\/davidegerosa.com\/installlal\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":2,"featured_media":1589,"parent":0,"menu_order":0,"comment_status":"closed","ping_status":"closed","template":"","meta":{"_coblocks_attr":"","_coblocks_dimensions":"","_coblocks_responsive_height":"","_coblocks_accordion_ie_support":"","_monsterinsights_skip_tracking":false,"_monsterinsights_sitenote_active":false,"_monsterinsights_sitenote_note":"","_monsterinsights_sitenote_category":0,"footnotes":""},"class_list":["post-1563","page","type-page","status-publish","has-post-thumbnail","hentry"],"jetpack_sharing_enabled":false,"_links":{"self":[{"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/pages\/1563","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/pages"}],"about":[{"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/types\/page"}],"author":[{"embeddable":true,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/comments?post=1563"}],"version-history":[{"count":0,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/pages\/1563\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/media\/1589"}],"wp:attachment":[{"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/media?parent=1563"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}