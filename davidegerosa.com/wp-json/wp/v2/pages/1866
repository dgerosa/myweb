{"id":1866,"date":"2018-08-19T18:51:53","date_gmt":"2018-08-20T01:51:53","guid":{"rendered":"http:\/\/davidegerosa.com\/?page_id=1866"},"modified":"2020-05-24T17:11:14","modified_gmt":"2020-05-24T17:11:14","slug":"spops","status":"publish","type":"page","link":"https:\/\/davidegerosa.com\/spops\/","title":{"rendered":"spops: Spinning black-hole binary Population Synthesis"},"content":{"rendered":"<p>Check me out on <a href=\"https:\/\/github.com\/dgerosa\/spops\">github.com\/dgerosa\/spops<\/a>.<code><br>\n<\/code><\/p>\n\n\n<p>Data release supporting:<\/p>\n\n<ul>\n<li><em>Spin orientations of merging black holes formed from the evolution of stellar binaries.<\/em>\nDavide Gerosa, Emanuele Berti, Richard O\u2019Shaughnessy, Krzysztof Belczynski, Michael Kesden, Daniel Wysocki, Wojciech Gladysz. Physical Review D 98 (2018) <a href=\"https:\/\/journals.aps.org\/prd\/abstract\/10.1103\/PhysRevD.98.084036\">084036<\/a>. arXiv:<a href=\"http:\/\/arxiv.org\/abs\/arXiv:1808.02491\">1808.02491<\/a> [astro-ph.HE].<\/li>\n<li><em>Multiband gravitational-wave event rates and stellar physics.<\/em>\nDavide Gerosa, Sizheng Ma, Kaze W.K. Wong, Emanuele Berti, Richard O\u2019Shaughnessy, Yanbei Chen, Krzysztof Belczynski. arXiv:<a href=\"http:\/\/arxiv.org\/abs\/arXiv:1902.00021\">1902.00021<\/a> [astro-ph.HE].<\/li>\n<\/ul>\n\n<p>Here provide our database and a short python code to query it.<\/p>\n\n<h3>Credit<\/h3>\n\n<p>You are more than welcome to use our database in your research; we kindly ask you to cite our papers above. For questions or bugs, just ask <a href=\"www.davidegerosa.com\">me<\/a>. Oh, and before you ask, <strong>SPopS<\/strong> means \"<strong>S<\/strong>pinning black-hole binary <strong>POP<\/strong>ulation <strong>S<\/strong>ynthesis\". If you want to cite the database specifically, it's\n<a href=\"https:\/\/zenodo.org\/badge\/latestdoi\/142477838\"><img src=\"https:\/\/zenodo.org\/badge\/142477838.svg\" alt=\"DOI\" \/><\/a><\/p>\n\n<h3>Examples<\/h3>\n\n<p>To access the effective spin distribution and the LIGO detection rates of one specific model with python:<\/p>\n\n<pre><code>import spops\ndb=spops.database()\nmodel = {\"kicks\":\"70\", \"spins\":\"collapse\", \"tides\":\"time\", \"detector\":\"LIGO\"}\nvar='chieff'\nprint(db(model,var))  \nvar='detectionrate'\nprint(db(model,var))\n<\/code><\/pre>\n\n<p>For the same population synthesis simulation, this is the mass ratio of black hole binaries detectable by a multiband LISA+CosmicExplorer network<\/p>\n\n<pre><code>model = {\"kicks\":\"70\", \"spins\":\"collapse\", \"tides\":\"time\", \"detector\":\"LISACosmicExplorer\", \"Tobs\":\"10\", \"SNRthr\":\"8\"}\nvar='q'\nprint(db(model,var))\nvar='detectionrate'\nprint(db(model,var))\n<\/code><\/pre>\n\n<h3>Database<\/h3>\n\n<p>We provide a database in <code>h5<\/code> format containing all population sysnthesis distributions perfomed with <a href=\"https:\/\/www.syntheticuniverse.org\/\">StarTrack<\/a> and post-processed with <a href=\"https:\/\/davidegerosa.com\/precession\/\">precession<\/a>.<\/p>\n\n<p>The database's size is ~17GB, and needs to be downloaded in chunks from the <a href=\"https:\/\/github.com\/dgerosa\/spops\/releases\">GitHub release page<\/a>. Execute the following:<\/p>\n\n<pre><code>for i in $(seq -f \"%02g\" 0 16); do\nwget \"https:\/\/github.com\/dgerosa\/spops\/releases\/download\/v0.2\/spops.h5_\"$i;\ndone\ncat spops.h5_* &gt; spops.h5; rm spops.h5_*\n<\/code><\/pre>\n\n<p>(on mac: `brew install wget').<\/p>\n\n<p>Models are described by the following options:\n  - <strong>kicks<\/strong>. Magnitude of the Supernova kicks. Available options are <code>['0','25','50','70','130','200','265']<\/code>.\n  - <strong>spins<\/strong>. Prescription for the spin magnitudes. Available options are <code>['collapse','max','uniform']<\/code>.\n  - <strong>tides<\/strong>. Prescription for tidal spin alignment. Available options are <code>['time','alltides','notides']<\/code>.\n  - <strong>detector<\/strong>. Targeted detector or multiband network. Available options are <code>['LIGO','Voyager','CosmicExplorer','LISA','LISALIGO','LISACosmicExplorer']<\/code>.\n  - <strong>Tobs<\/strong>. Duration of the LISA mission in yrs.  Available options are <code>['4','10]<\/code>.\n  - <strong>SNRthr<\/strong>. LISA SNR threshold.  Available options are <code>['4','8]<\/code>.<\/p>\n\n<p>Not all options are required for all the variables (for instance, LISA duration does not need to be specified to access ground-only information).<\/p>\n\n<p>The following variables are available:<\/p>\n\n<ul>\n<li><code>Mzams_a<\/code>: ZAMS mass of the heavier star (solar masses).<\/li>\n<li><code>Mzams_b<\/code>: ZAMS mass of the lighter star (solar masses).<\/li>\n<li><code>M_a<\/code>: Mass of the black hole formed by the heavier ZAMS star (solar masses).<\/li>\n<li><code>M_b<\/code>: Mass of the black hole formed by the lighter ZAMS star (solar masses).<\/li>\n<li><code>zmer<\/code>: Merger redshift.<\/li>\n<li><code>met<\/code>: Metallicity.<\/li>\n<li><code>path<\/code>: Formation pathway, convention in Sec. 2D of arXiv:<a href=\"http:\/\/arxiv.org\/abs\/arXiv:1808.02491\">1808.02491<\/a>.<\/li>\n<li><code>tidealign<\/code>: boolean flag marking if the stellar spin was realigned by tides.<\/li>\n<li><code>M<\/code>: Black-hole binary total mass (solar masses).<\/li>\n<li><code>q<\/code>: Black-hole binary mass ratio.<\/li>\n<li><code>chi1<\/code>: Spin of the heavier black hole.<\/li>\n<li><code>chi2<\/code>: Spin of the lighter black hole.<\/li>\n<li><code>chieff<\/code>: Black-hole binary effective spin<\/li>\n<li><code>morph<\/code>: Spin morphology (-1: Librating about 0, 0: Circulating, +1: Librating about pi)<\/li>\n<li><code>theta1<\/code>: Tilt angle of the heavier black hole at 20 Hz.<\/li>\n<li><code>theta2<\/code>: Tilt angle of the heavier black hole at 20 Hz.<\/li>\n<li><code>deltaphi<\/code>: Difference between the azimuthal spin angles at 20 Hz.<\/li>\n<li><code>SNR<\/code>: Signal-to-noise ratio. For ground-based detector returns the optimal SNR. For LISA returns SNR evaluated at Tobs.<\/li>\n<li><code>detectionrate<\/code>: Detection rate for the targeted detector.<\/li>\n<\/ul>\n\n<h3>Python module<\/h3>\n\n<p>We also provide a simple python module to query the database. <code>spops<\/code> is compatible with both Python 2 and Python 3 and can be installed from the <a href=\"https:\/\/pypi.python.org\/pypi\/spops\">Python Package index<\/a> using:<\/p>\n\n<pre><code>pip install spops\n<\/code><\/pre>\n\n<p>Remember to download and assemble the database as described above. The module contains a single class, called <code>database<\/code>. To initialize the class:<\/p>\n\n<pre><code>import spops\ndb = spops.database(h5filename='spops.h5',h5dir=None)\n<\/code><\/pre>\n\n<p>The input parameters are:<\/p>\n\n<ul>\n<li><code>h5filename<\/code>: database file name, default is <code>spops.h5<\/code>.<\/li>\n<li><code>h5dir<\/code>: directory of the database; if <code>None<\/code> (default) the code will look for detabase in both the location where the <code>spops<\/code> module is installed (this is <code>os.path.dirname(os.path.abspath(spops.__file__))<\/code>) and the execution location (this is <code>.<\/code>).<\/li>\n<\/ul>\n\n<p>The population sysnthesis run of interest can be specified using a python dictionary with the keys as above, so for instance<\/p>\n\n<pre><code>model = {\"kicks\":\"70\", \"spins\":\"collapse\", \"tides\":\"time\", \"detector\":\"LIGO\"}\n<\/code><\/pre>\n\n<p>One can then access the datasets described above by just calling the database class:<\/p>\n\n<pre><code>var='chieff'\nprint(db(model,var))\n<\/code><\/pre>\n\n<p>To list the model options and the available variables use<\/p>\n\n<pre><code>print(db.options)\nprint(db.vars)\n<\/code><\/pre>\n\n<h4>A few technical notes:<\/h4>\n\n<ul>\n<li><p>The <code>database<\/code> class is a <a href=\"https:\/\/en.wikipedia.org\/wiki\/Singleton_pattern\">singleton<\/a>: only one istance can exist at any time. Multiple calls will return pointers to the same instance. This is done to prevent useless memory allocation. For instance:<\/p>\n\n<pre><code>db1=spops.database()\ndb2=spops.database()\nprint(db1==db2)\n\n\n&gt;&gt;&gt;&gt; True\n<\/code><\/pre><\/li>\n<li><p>We do <a href=\"https:\/\/en.wikipedia.org\/wiki\/Lazy_loading\">lazy loading<\/a> here and only read in a dataset when\/if the user asks for it.  Moreover, <code>spops<\/code> remembers which dataset have already been loaded, such that each subsequent access is read in from memory, not disk. So for instance:<\/p>\n\n<pre><code>from contexttimer import timer\n@timer()\ndef read_from_spops(model,var):\n    return db(model,var)\nvar='Mzams_a'\nread_from_spops(model,var)\nread_from_spops(model,var)\n\n&gt;&gt;&gt;&gt; function read_from_spops execution time: 0.002\n&gt;&gt;&gt;&gt; function read_from_spops execution time: 0.000\n<\/code><\/pre><\/li>\n<\/ul>\n\n","protected":false},"excerpt":{"rendered":"<p>Check me out on github.com\/dgerosa\/spops.<\/p>\n","protected":false},"author":2,"featured_media":1880,"parent":0,"menu_order":0,"comment_status":"closed","ping_status":"closed","template":"","meta":{"_coblocks_attr":"","_coblocks_dimensions":"","_coblocks_responsive_height":"","_coblocks_accordion_ie_support":"","_mi_skip_tracking":false,"spay_email":""},"_links":{"self":[{"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/pages\/1866"}],"collection":[{"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/pages"}],"about":[{"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/types\/page"}],"author":[{"embeddable":true,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/comments?post=1866"}],"version-history":[{"count":4,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/pages\/1866\/revisions"}],"predecessor-version":[{"id":3449,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/pages\/1866\/revisions\/3449"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/media\/1880"}],"wp:attachment":[{"href":"https:\/\/davidegerosa.com\/wp-json\/wp\/v2\/media?parent=1866"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}